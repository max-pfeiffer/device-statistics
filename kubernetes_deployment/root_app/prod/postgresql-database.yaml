apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: prod-postgresql
  namespace: argocd
  finalizers:
  - resources-finalizer.argocd.argoproj.io
  annotations:
    argocd.argoproj.io/sync-wave: "-200"
spec:
  project: prod
  syncPolicy:
    automated: {}
  destination:
    namespace: prod
    server: https://kubernetes.default.svc
  source:
    chart: postgresql
    repoURL: "oci://registry-1.docker.io/bitnamicharts/postgresql"
    targetRevision: "18.1.4"
    helm:
      releaseName: postgresql
      valuesObject:
        architecture: "standalone"
        auth:
          existingSecret: "postgresql"
          database: "devicestatistics"
          username: "testuser"
        primary:
          persistence:
            size: 200M
